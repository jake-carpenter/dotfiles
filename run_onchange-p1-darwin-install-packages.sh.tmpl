{{ if eq .chezmoi.os "darwin" -}}
#!/bin/zsh

echo '\n\n>>> Tapping formulae...'
brew tap isacikgoz/taps
brew tap eth-p/software
brew tap osx-cross/avr
brew tap qmk/qmk

echo '\n\n>>> Installing common brew packages...'

brew bundle --no-lock --file=/dev/stdin <<EOF
{{ range .packages.darwin.common.brews -}}
brew {{ . | quote }}
{{ end -}}
{{ range .packages.darwin.common.casks -}}
cask {{ . | quote }}
{{ end -}}
EOF

{{ if ne .chezmoi.config.destDir "/Users/a089947" }}

echo '\n\n>>> Installing home-only brew packages...'

brew bundle --no-lock --file=/dev/stdin <<EOF
{{ range .packages.darwin.home.brews -}}
brew {{ . | quote }}
{{ end -}}
{{ range .packages.darwin.home.casks -}}
cask {{ . | quote }}
{{ end -}}
EOF

{{ end }}

{{ else -}}
#!/bin/bash
{{ end }}

echo -e "\n\n>>> Installing npm packages:"
{{ range .packages.npm.common }}
echo -e "  - {{ . }}"
{{ end }}

npm install --global {{ range .packages.npm.common -}} {{ . | quote }} {{ end -}}
